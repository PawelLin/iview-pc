{"version":3,"sources":["webpack:///./src/libs/service.js","webpack:///./src/components/demo/service.vue?e793","webpack:///src/components/demo/service.vue","webpack:///./src/components/demo/service.vue?58ce","webpack:///./src/components/demo/service.vue","webpack:///./src/components/demo/service.vue?b067"],"names":["getOrgList","pOrgCode","axios","post","downloadBlob","url","data","responseType","then","res","reader","FileReader","onload","JSON","parse","result","Vue","prototype","$Loading","error","$Message","message","blob","Blob","fileName","decodeURIComponent","headers","split","document","createElement","a","download","style","display","href","URL","createObjectURL","body","appendChild","click","revokeObjectURL","removeChild","navigator","msSaveBlob","readAsText","downloadForm","form","key","method","action","process","i","type","value","name","submit","remove","render","_vm","this","_h","$createElement","_c","_self","attrs","_l","item","label","staticClass","_v","_s","on","$event","common","button","directives","rawName","expression","slot","title","content","staticRenderFns","component"],"mappings":"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","file":"js/chunk-d22dcfa6.8bdef999.js","sourcesContent":["import Vue from 'vue'\r\nimport axios from './axios'\r\n\r\n// 获取机构列表\r\nexport function getOrgList (pOrgCode) {\r\n    return axios.post('/common/org', { pOrgCode })\r\n}\r\n\r\nexport function downloadBlob (url, data) {\r\n    return axios.post(url, data, { responseType: 'blob' }).then(res => {\r\n        // 下载失败，返回{ code: '9999' }，但responseType: 'blob'会把data强制转为blob\r\n        // 解决：将已转为blob类型的data转回json格式，判断是否下载成功\r\n        let reader = new FileReader()\r\n        reader.onload = () => {\r\n            try {\r\n                let data = JSON.parse(reader.result)\r\n                Vue.prototype.$Loading.error()\r\n                Vue.prototype.$Message.error(data.message)\r\n            } catch (error) {\r\n                const blob = new Blob([res.data])\r\n                const fileName = decodeURIComponent(res.headers['content-disposition'].split(';')[1].split('filename=')[1])\r\n                if ('download' in document.createElement('a')) { // 非IE下载\r\n                    let a = document.createElement('a')\r\n                    a.download = fileName\r\n                    a.style.display = 'none'\r\n                    a.href = URL.createObjectURL(blob)\r\n                    document.body.appendChild(a)\r\n                    a.click()\r\n                    URL.revokeObjectURL(a.href) // 释放URL 对象\r\n                    document.body.removeChild(a)\r\n                } else { // IE10+下载\r\n                    navigator.msSaveBlob(blob, fileName)\r\n                }\r\n            }\r\n        }\r\n        reader.readAsText(res.data)\r\n    })\r\n}\r\n\r\nexport function downloadForm (url, data) {\r\n    // let iframe = document.createElement('iframe')\r\n    let form = document.createElement('form')\r\n    form.method = 'post'\r\n    form.action = `${process.env.VUE_APP_BASEURL}${url}`\r\n    for (let key in data) {\r\n        let i = document.createElement('input')\r\n        i.type = 'hidden'\r\n        i.value = data[key]\r\n        i.name = key\r\n        form.appendChild(i)\r\n    }\r\n    // iframe.appendChild(form)\r\n    document.body.appendChild(form)\r\n    form.submit()\r\n    form.remove()\r\n    // iframe.remove()\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Form',{attrs:{\"label-width\":120}},[_c('Row',{attrs:{\"gutter\":20}},[_c('Col',{attrs:{\"span\":\"12\"}},[_c('Card',{attrs:{\"title\":\"service.js\",\"dis-hover\":\"\"}},[_c('Row',_vm._l((_vm.list),function(item){return _c('Col',{key:item.method},[_c('FormItem',{attrs:{\"label\":item.label}},[_c('span',{staticClass:\"desc\"},[_vm._v(_vm._s(item.method))]),_c('Button',{staticClass:\"button\",attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.common(item)}}},[_vm._v(_vm._s(item.button))])],1)],1)}),1)],1)],1),_c('Col',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.title),expression:\"title\"}],attrs:{\"span\":\"12\"}},[_c('Card',{attrs:{\"dis-hover\":\"\"}},[_c('p',{attrs:{\"slot\":\"title\"},slot:\"title\"},[_vm._v(_vm._s(_vm.title)+\"-响应数据\")]),_c('pre',{staticClass:\"pre\"},[_vm._v(_vm._s(_vm.content))])])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <Form :label-width=\"120\">\r\n        <Row :gutter=\"20\">\r\n            <Col span=\"12\">\r\n                <Card title=\"service.js\" dis-hover>\r\n                    <Row>\r\n                        <Col v-for=\"item in list\" :key=\"item.method\">\r\n                            <FormItem :label=\"item.label\">\r\n                                <span class=\"desc\">{{item.method}}</span>\r\n                                <Button class=\"button\" @click=\"common(item)\" type=\"primary\" size=\"small\">{{item.button}}</Button>\r\n                            </FormItem>\r\n                        </Col>\r\n                    </Row>\r\n                </Card>\r\n            </Col>\r\n            <Col span=\"12\" v-show=\"title\">\r\n                <Card dis-hover>\r\n                    <p slot=\"title\">{{title}}-响应数据</p>\r\n                    <pre class=\"pre\">{{content}}</pre>\r\n                </Card>\r\n            </Col>\r\n        </Row>\r\n    </Form>\r\n</template>\r\n\r\n<script>\r\nimport { getOrgList, downloadBlob, downloadForm } from '@/libs/service'\r\nexport default {\r\n    name: 'demo_service',\r\n    data () {\r\n        return {\r\n            title: '',\r\n            content: '',\r\n            list: [\r\n                { label: '获取机构列表', method: 'getOrgList', button: '获取' },\r\n                { label: '文件下载-blob', method: 'downloadBlob', button: '下载', download: true },\r\n                { label: '文件下载-form', method: 'downloadForm', button: '下载', download: true }\r\n            ]\r\n        }\r\n    },\r\n    methods: {\r\n        common (item) {\r\n            this.title = item.download ? '' : item.label\r\n            this[item.method]()\r\n        },\r\n        getOrgList () {\r\n            getOrgList().then(res => {\r\n                this.content = JSON.stringify(res.data, null, 4)\r\n            })\r\n        },\r\n        downloadBlob () {\r\n            downloadBlob('/file')\r\n        },\r\n        downloadForm () {\r\n            downloadForm('/file')\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.desc {\r\n    display: inline-block;\r\n    min-width: 120px;\r\n}\r\n.button {\r\n    margin-right: 10px;\r\n}\r\n.pre {\r\n    margin: 0;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./service.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./service.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./service.vue?vue&type=template&id=0df4168c&scoped=true&\"\nimport script from \"./service.vue?vue&type=script&lang=js&\"\nexport * from \"./service.vue?vue&type=script&lang=js&\"\nimport style0 from \"./service.vue?vue&type=style&index=0&id=0df4168c&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0df4168c\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./service.vue?vue&type=style&index=0&id=0df4168c&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./service.vue?vue&type=style&index=0&id=0df4168c&lang=less&scoped=true&\""],"sourceRoot":""}